
/*!
 * @version 2.0.17
 * @package Perfect Easy & Powerful Contact Form
 * @copyright © 2015 Perfect Web sp. z o.o., All rights reserved. http://www.perfect-web.co
 * @license GNU/GPL http://www.gnu.org/licenses/gpl-3.0.html
 * @author Piotr Moćko
 *
 * jQuery 1.8+
 */
var pwebBoxes=pwebBoxes||[],pwebcontact_l10n=pwebcontact_l10n||{};(function(a){pwebContact=function(b){this.init(b)};pwebContact.prototype=(function(){var b={};return{constructor:pwebContact,defaults:{id:"",selector:"#pwebcontact",selectorClass:".pwebcontact",debug:false,ajaxUrl:"",reloadToken:false,bootstrap:2,openAuto:false,openDelay:0,maxAutoOpen:0,closeAuto:false,closeDelay:0,closeOther:true,reset:1,redirectURL:"",redirectDelay:3,layout:"slidebox",theme:"",position:"left",offsetPosition:"top",tooltips:3,msgScroll:true,msgPosition:"after",msgCloseDelay:10,togglerNameOpen:"",togglerNameClose:"",slideWidth:0,slideDuration:400,slideTransition:"swing",accordionDuration:500,accordionEaseIn:"easeInBack",accordionEaseOut:"easeOutBounce",modalBackdrop:true,modalClose:true,modalStyle:"default",modalEffect:"fade",modalEffectDuration:400,modalEaseIn:"easeInCubic",modalEaseOut:"easeOutCubic",cookieLifetime:30,cookiePath:"/",cookieDomain:"",onLoad:function(){},onOpen:function(){},onClose:function(){},onComplete:function(c){},onError:function(c){},uploadAcceptFileTypes:/(\.|\/)(gif|jpe?g|png|docx?|odt|txt|pdf|zip)$/i,uploadMaxSize:1048576,uploadFilesLimit:5,uploadAutoStart:true,validatorRules:[],calendars:[],calendarFirstDay:0},status:0,hidden:true,timer:false,validator:false,tooltip:false,uploader:false,uploadQueue:0,init:function(c){var e=this;this.options=a.extend({},this.defaults,c);this.options.selector=this.options.selector+this.options.id;this.options.selectorClass=this.options.selectorClass+this.options.id;this.element=a(this.options.selector);this.Msg=a(this.options.selector+"_msg");this.Form=a(this.options.selector+"_form");this.ButtonSend=a(this.options.selector+"_send");this.Toggler=a(this.options.selector+"_toggler");this.Box=a(this.options.selector+"_box");this.Container=a(this.options.selector+"_container");this.Token=a(this.options.selector+"_token");if(this.Form.get(0)){this.Form.get(0).reset()}this.Form.submit(function(g){g.preventDefault()});if(this.options.layout=="slidebox"){this.element.appendTo(document.body);this.initSlidebox()}else{if(this.options.layout=="modal"){this.element.appendTo(document.body);if(!this.initModal()){return false}}else{if(this.options.layout=="accordion"){this.initAccordion()}}}this.options.onLoad.apply(this);var d=false;if(document.location.hash.indexOf(this.options.selector+":")!==-1){var f=document.location.hash.replace(this.options.selector+":","");if(f.indexOf("open")===0&&(typeof f[4]==="undefined"||f[4]==":")){f=f.replace(/open(:)?/i,"");d=true}if(f){this.preloadFields(f)}}if(this.options.tooltips){this.initTooltips()}this.initTextareaCounters();this.initModalRules();if(this.options.layout!="static"){a(this.options.selectorClass+"_toggler").click(function(g){g.preventDefault();e.toggleForm(-1,-1,this,g)});if(this.options.togglerNameClose){this.options.togglerNameOpen=this.Toggler.find(".pweb-text").text()}if(this.options.closeOther){pwebBoxes.push(this)}if(d){this.autoPopupOnPageLoad()}else{if(this.options.openAuto){if(this.options.maxAutoOpen>0){if(!this.initAutoPopupCookie()){this.options.openAuto=false}}switch(this.options.openAuto){case 1:this.autoPopupOnPageLoad();break;case 2:this.autoPopupOnPageScroll();break;case 3:this.autoPopupOnPageExit()}}}}this.initHiddenFields();this.initValidator();this.ButtonSend.click(function(){e.submitForm()});if(this.options.reset==3){this.ButtonReset=a(this.options.selector+"_reset");this.ButtonReset.click(function(){a(this).hide();e.resetForm()})}this.displayMsg("","");return this},initSlidebox:function(){var c=this;this.options.togglerSlide=this.Box.hasClass("pweb-toggler-slide");this.options.togglerHidden=this.Box.hasClass("pweb-toggler-hidden");this.options.slidePos=this.element.css("position");if(!this.options.slideWidth){this.options.slideWidth=parseInt(this.Box.css("max-width"))}this.Box.css("width",this.options.slideWidth);if(this.options.position=="left"||this.options.position=="right"){this.Box.css(this.options.position,-this.options.slideWidth);this.options.togglerWidth=this.options.togglerSlide?this.Toggler.outerWidth():0;this.options.togglerHeight=this.options.togglerSlide?parseInt(this.Box.css("top")):0;this.options.slideOffset=parseInt(this.element.css("top"));if(this.options.togglerSlide){this.Toggler.css(this.options.position=="left"?"right":"left",-this.Toggler.outerWidth())}}else{setTimeout(function(){c.Box.css(c.options.position,-c.Box.height())},100);this.options.togglerWidth=0;this.options.togglerHeight=this.options.togglerSlide?this.Toggler.outerHeight():0;this.options.slideOffset=0;if(this.options.togglerSlide){this.Toggler.css(this.options.position=="top"?"bottom":"top",-this.Toggler.outerHeight())}}this.Box.addClass("pweb-closed");setTimeout(function(){c.Box.removeClass("pweb-init")},100);if(this.options.togglerHidden){this.Toggler.fadeOut(0).removeClass("pweb-closed").addClass("pweb-opened");if(this.options.togglerNameClose){this.Toggler.find(".pweb-text").text(this.options.togglerNameClose)}}this.isFF=navigator.userAgent.indexOf("Gecko")!=-1;a(window).scroll(function(d){if(!c.hidden&&c.element.css("position")=="absolute"&&c.options.slidePos=="fixed"){var f=a(this).scrollTop();if(c.options.position=="bottom"){f=f+a(this).height();if(f>c.element.offset().top){if(c.isFF){c.element.css("top",f)}else{c.element.stop().animate({top:f},250,"linear")}}}else{f=f+c.options.slideOffset;if(f<c.element.offset().top){if(c.isFF){c.element.css("top",f)}else{c.element.stop().animate({top:f},250,"linear")}}}}});a(window).resize(function(){if(!c.hidden){var d={width:c.options.slideWidth};var e=a(window).width();if(c.options.position=="left"||c.options.position=="right"){if(c.options.slideWidth+c.options.togglerWidth>e){d.width=e-c.options.togglerWidth}}else{var f=c.element.offset().left;if(c.options.offsetPosition=="right"){f=a(document).width()-f}if(c.options.slideWidth+f>e){d.width=e-f}}c.Box.css(d);if(c.options.slidePos=="fixed"){var d={position:"absolute"};if(c.options.position=="left"||c.options.position=="right"){d.top=c.element.offset().top;if(c.Box.height()+c.options.togglerHeight+d.top-a(window).scrollTop()<=a(window).height()){d.position="fixed";d.top=c.options.slideOffset}}else{if(c.Box.height()+c.options.togglerHeight>a(window).height()){d.top=c.element.offset().top;if(c.options.position=="bottom"){d.bottom="auto"}}else{d.position="fixed";d[c.options.position]=0;if(c.options.position=="bottom"){d.top="auto"}}}c.element.css(d)}}})},initModal:function(){var c=this;if(typeof a.fn.modal==="function"){this.Modal=a(this.options.selector+"_modal");this.options.modalClass="pwebcontact"+this.options.id+"_modal-open pweb-modal-open"+(this.options.theme?" pweb-theme-"+this.options.theme:"")+" pweb-modal-"+this.options.modalStyle;this.Modal.appendTo(document.body).modal({show:false,keyboard:false,backdrop:!this.options.modalClose&&this.options.modalBackdrop?"static":this.options.modalBackdrop}).on(this.options.bootstrap===2?"hidden":"hidden.bs.modal",function(d){d.stopPropagation();if(d.target!==d.currentTarget){return}c.toggleForm(0);a(document.body).removeClass(c.options.modalClass);c.Box.addClass("pweb-closed")}).on(this.options.bootstrap===2?"show":"show.bs.modal",function(d){d.stopPropagation();if(d.target!==d.currentTarget){return}a(document.body).addClass(c.options.modalClass);c.Box.removeClass("pweb-closed")}).click(function(d){if(d.target!==d.currentTarget||!c.options.modalClose){return}c.toggleForm(0)});if(this.options.modalEffect!=="fade"&&this.options.modalEffect!=="drop"){this.initGenie()}return true}else{if(this.options.debug){this.debug("Bootstrap Modal Plugin is not loaded")}}return false},initModalRules:function(){var d=this,c=this.Form.find(".pweb-modal-url");if(!c.length){return}if(typeof a.fn.modal==="function"){if(typeof this.options.modalClass==="undefined"){this.options.modalClass="pwebcontact"+this.options.id+"_modal-open pweb-modal-open"+(this.options.theme?" pweb-theme-"+this.options.theme:"")+" pweb-modal-"+this.options.modalStyle}c.click(function(i){i.preventDefault();var f=a(this).attr("href");if(f.indexOf("#")===0&&a(f).length===0){return}var g=a('<div class="pweb-modal pweb-modal-rules modal fade'+(d.options.bootstrap==2?" hide":"")+(d.Box.hasClass("pweb-rtl")?" pweb-rtl":"")+'"><button type="button" class="pweb-button-close" data-dismiss="modal" aria-hidden="true">&times;</button><div class="modal-body pweb-progress"></div></div>').appendTo(document.body).modal({show:false,backdrop:(d.options.layout=="modal"?0:true)}).on(d.options.bootstrap===2?"hidden":"hidden.bs.modal",function(){i.stopPropagation();if(f.indexOf("#")===0){a(f).append(h)}a(document.body).removeClass(d.options.modalClass);a(this).remove()});a("body").on(d.options.bootstrap===2?"show":"show.bs.modal","div.pweb-modal-rules",function(j){j.stopPropagation();if(j.target!==j.currentTarget){return}a(document.body).addClass(d.options.modalClass)});if(f.indexOf("#")!==0){g.on(d.options.bootstrap===2?"shown":"shown.bs.modal",function(){a(this).find("iframe").height(a(this).height())}).find(".modal-body").html('<iframe width="100%" height="100%" frameborder="0" scrolling="yes" allowtransparency="true" src="'+f+'"></iframe>').css({width:"auto",height:"100%",padding:"0",overflow:"hidden"}).find("iframe").on("load",function(){a(this).parent().removeClass("pweb-progress")})}else{var h=a(f).children();g.find(".modal-body").append(h).removeClass("pweb-progress")}g.modal("show")});return true}else{if(this.options.debug){this.debug("Bootstrap Modal Plugin is not loaded")}}return false},initGenie:function(){var c=this,d=this.Box.attr("class").match(/pweb-bg-[a-z]+/i);this.options.modalGenieClass="pweb-genie pweb-"+this.options.modalEffect+"-"+(this.options.position!=="static"?this.options.position:"bottom")+" pwebcontact"+this.options.id+"-genie"+(this.options.theme?" pweb-theme-"+this.options.theme:"")+(this.Box.hasClass("pweb-radius")?" pweb-radius":"")+(this.Box.hasClass("pweb-shadow")?" pweb-shadow":"")+(d?" "+d[0]:"");if(this.options.modalEffect==="smooth"){this.options.modalEaseIn="easeInQuart";this.options.modalEaseOut="easeOutQuart"}else{if(this.options.modalEffect==="rotate"){this.options.modalEaseIn="easeInQuint";this.options.modalEaseOut="easeOutQuint"}}this.Modal.on(this.options.bootstrap===2?"show":"show.bs.modal",function(f){f.stopPropagation();if(f.target!==f.currentTarget){return}if(typeof c.eventSource!=="undefined"&&a(c.eventSource).length){c.Container.css({visibility:"hidden"})}}).on(this.options.bootstrap===2?"shown":"shown.bs.modal",function(f){f.stopPropagation();if(f.target!==f.currentTarget){return}if(typeof c.eventSource!=="undefined"&&a(c.eventSource).length){a(c.eventSource).trigger("modalOpen")}});a(this.options.selectorClass+"_toggler").on("modalOpen",function(){a(this).effect({effect:"transfer",to:c.Container,duration:c.options.modalEffectDuration,easing:c.options.modalEaseIn,className:"pweb-genie-show "+c.options.modalGenieClass,complete:function(){c.Container.css({visibility:"visible"})}})});this.Container.on("modalClose",function(){a(this).css({visibility:"hidden"}).effect({effect:"transfer",to:a(c.eventSource),duration:c.options.modalEffectDuration,easing:c.options.modalEaseOut,className:"pweb-genie-hide "+c.options.modalGenieClass,complete:function(){c.Modal.modal("hide")}})})},initAccordion:function(){var c=this;a(this.options.selectorClass+"_toggler").on("openAccordion",function(){c.Box.removeClass("pweb-closed").slideDown({duration:c.options.accordionDuration,easing:c.options.accordionEaseOut,complete:function(){var d=a(window).height(),f=c.element.outerHeight(),e=c.element.offset().top;if(e+f>a(window).scrollTop()+d){if(f<d){e=e+f-d}a("html,body").animate({scrollTop:parseInt(e)},500)}}})});a(this.options.selectorClass+"_toggler").on("closeAccordion",function(){c.Box.slideUp({duration:c.options.accordionDuration,easing:c.options.accordionEaseIn,complete:function(){c.Box.addClass("pweb-closed")}})});this.Box.css("display","none").removeClass("pweb-init");return true},initTooltips:function(){var c=this;if(typeof a.fn.tooltip==="function"){this.tooltip=true;this.Form.find("input.pweb-input.pweb-tooltip,select.pweb-tooltip,textarea.pweb-tooltip").tooltip({trigger:this.options.tooltips==2?"manual":"focus",html:false});this.Form.find("fieldset.pweb-tooltip,.pweb-field-checkbox label.pweb-tooltip,.pweb-field-checkbox_modal label.pweb-tooltip,.fileinput-button.pweb-tooltip").tooltip({trigger:this.options.tooltips==2?"manual":"hover",html:false});this.Form.find(".pweb-tooltip").on("show",function(d){d.stopPropagation();if(d.target!==d.currentTarget){return}}).on("shown",function(d){d.stopPropagation();if(d.target!==d.currentTarget){return}}).on(this.options.bootstrap===2?"hide":"hide.bs.tooltip",function(d){if(c.options.bootstrap===3){d.preventDefault();a(this).siblings("div.tooltip.in").removeClass("in")}d.stopPropagation();if(d.target!==d.currentTarget){return}}).on("hidden",function(d){d.stopPropagation();if(d.target!==d.currentTarget){return}});return true}else{if(this.options.debug){this.debug("Bootstrap Tooltip Plugin is not loaded")}}return false},initTextareaCounters:function(){this.Form.find("textarea[maxlength]").keyup(function(){var c=parseInt(a(this).attr("maxlength"));var d=a(this).val();if(d.length>=c){d=d.substring(0,c);a(this).val(d)}a("#"+a(this).attr("id")+"-limit").text(c-d.length)}).trigger("keyup");return true},preloadFields:function(f){var d=this;try{var c=f.split("/");a.each(c,function(i,j){j=j.split("=");if(j.length>=2){j[1]=unescape(j[1]);var h=a(d.options.selector+"_field-"+j[0]),e=h.prop("tagName").toLowerCase();if(e=="fieldset"){h.find("input").val(j[1].split(";"))}else{if(e=="select"&&h.attr("multiple")){h.val(j[1].split(";")).trigger("focus").trigger("blur")}else{if(e=="input"&&h.attr("type")=="checkbox"){h.attr("checked",j[1]!=0?true:false)}else{h.val(j[1]).trigger("focus").trigger("blur");if(e=="textarea"){h.trigger("keyup")}}}}}})}catch(g){console.log(g)}},initValidator:function(){var c=this;if(typeof a.fn.validate==="function"){a.each(this.options.validatorRules,function(d,e){a.validator.addMethod("pweb"+c.options.id+"-validate-"+e.name,function(g,f){return this.optional(f)||(e.regexp).test(g)},"")});this.validator=this.Form.validate({debug:this.options.debug,onsubmit:false,errorClass:"invalid",showErrors:function(g,e){var h,d;for(h=0;e[h];h++){var j=e[h].element;this.settings.highlight.call(this,j,this.settings.errorClass,this.settings.validClass);j=a(j);if(j.hasClass("pweb-fieldset")){j=j.parents("fieldset")}a("#"+j[0].id+"-lbl").addClass(this.settings.errorClass);if(h==0&&c.element.css("position")!="fixed"){if(c.options.layout=="modal"){var l=c.Box.outerHeight()-a(window).height();if(l>0){var m=j.parent().parent().offset().top-c.Box.offset().top;if(m>l){m=l}c.Modal.animate({scrollTop:parseInt(m)},500)}}else{if(c.element.css("position")!="fixed"){var m=j.parent().parent().offset().top-10,k=a(window).scrollTop(),f=a(window).height();if(m<k+50||m>k+f-50){m=m-f/2;a("html,body").animate({scrollTop:parseInt(m)},500)}}}}if(c.tooltip&&c.options.tooltips>=2){if(j.hasClass("pweb-single-checkbox")){if(j.next().hasClass("pweb-tooltip")){j.next().tooltip("show")}}else{if(j.hasClass("pweb-tooltip")){j.tooltip("show")}}}}for(h=0,d=this.validElements();d[h];h++){var j=d[h];this.settings.unhighlight.call(this,j,this.settings.errorClass,this.settings.validClass);j=a(j);if(j.hasClass("pweb-fieldset")){j=j.parents("fieldset")}a("#"+j[0].id+"-lbl").removeClass(this.settings.errorClass);if(c.tooltip&&c.options.tooltips>=2){if(j.hasClass("pweb-single-checkbox")){if(j.next().hasClass("pweb-tooltip")){j.next().tooltip("hide")}}else{if(j.hasClass("pweb-tooltip")){j.tooltip("hide")}}}}}});return true}else{if(this.options.debug){this.debug("jQuery Validate Plugin is not loaded")}}return false},initHiddenFields:function(){a("<input/>",{type:"hidden",name:"title",value:document.title}).appendTo(this.Form);a("<input/>",{type:"hidden",name:"url",value:document.location.href}).appendTo(this.Form);if(this.options.debug){a("<input/>",{type:"hidden",name:"debug",value:1}).appendTo(this.Form)}return true},close:function(){this.toggleForm(0)},toggleForm:function(h,g,j,f){var e=this;if(typeof h==="undefined"){h=-1}if(typeof j==="undefined"){j=this.Toggler}if(!this.hidden&&(h===-1||h===0)){this.hidden=true;if(this.Toggler.length&&!this.options.togglerHidden){this.Toggler.removeClass("pweb-opened").addClass("pweb-closed");if(this.options.togglerNameClose){this.Toggler.find(".pweb-text").text(this.options.togglerNameOpen)}}if(this.options.openAuto===false&&this.timer){clearTimeout(this.timer)}if(this.options.layout=="slidebox"){var c={};c[this.options.position]=(this.options.position=="left"||this.options.position=="right")?-this.Box.width():-this.Box.height();this.Box.stop(true,false).animate(c,this.options.slideDuration,this.options.slideTransition,function(){e.Box.addClass("pweb-closed");if(e.element.css("position")=="absolute"&&e.options.slidePos=="fixed"){var k={position:"fixed"};if(e.options.position=="left"||e.options.position=="right"){k.top=e.options.slideOffset}else{k[e.options.position]=0;if(e.options.position=="bottom"){k.top="auto"}}e.element.css(k)}});if(this.options.togglerHidden){this.Toggler.fadeOut(this.options.slideDuration)}}else{if(this.options.layout=="modal"){if(this.options.modalEffect!=="fade"&&this.options.modalEffect!=="drop"&&typeof this.eventSource!=="undefined"){this.Container.trigger("modalClose")}else{this.Modal.modal("hide")}}else{if(this.options.layout=="accordion"){a(j).trigger("closeAccordion")}}}this.options.onClose.apply(this);if(this.options.reset==2){this.resetForm()}}else{if(this.hidden&&(h===-1||h===1)){if(this.options.closeOther){a.each(pwebBoxes,function(){if(this.options.id!=e.options.id&&typeof this.close==="function"){this.close()}})}if(this.options.openAuto===1||this.options.openAuto===2){this.options.openAuto=false;if(this.timer){clearTimeout(this.timer)}}this.hidden=false;if(this.Toggler.length&&!this.options.togglerHidden){this.Toggler.removeClass("pweb-closed").addClass("pweb-opened");if(this.options.togglerNameClose){this.Toggler.find(".pweb-text").text(this.options.togglerNameClose)}}if(this.options.layout=="slidebox"){var c={width:this.options.slideWidth};c[this.options.position]=0;var d=a(window).width();if(this.options.position=="left"||this.options.position=="right"){if(this.options.slideWidth+this.options.togglerWidth>d){c.width=d-this.options.togglerWidth}}else{var i=this.element.offset().left;if(this.options.offsetPosition=="right"){i=a(document).width()-i}if(this.options.slideWidth+i>d){c.width=d-i}}this.Box.stop(true,false).animate(c,this.options.slideDuration,this.options.slideTransition,function(){if(e.options.slidePos=="fixed"){var k={position:"absolute"};if(e.options.position=="left"||e.options.position=="right"){k.top=e.element.offset().top;if(e.Box.height()+e.options.togglerHeight+k.top-a(window).scrollTop()>a(window).height()){k.top=e.element.offset().top;e.element.css(k)}}else{if(e.Box.height()+e.options.togglerHeight>a(window).height()){k.top=e.element.offset().top;if(e.options.position=="bottom"){k.bottom="auto"}e.element.css(k)}}}}).css("overflow","visible").removeClass("pweb-closed");if(this.options.togglerHidden){this.Toggler.fadeIn(this.options.slideDuration)}}else{if(this.options.layout=="modal"){if(this.options.modalEffect!=="fade"&&this.options.modalEffect!=="drop"&&a(j).length){this.eventSource=j}this.Modal.modal("show")}else{if(this.options.layout=="accordion"){a(j).trigger("openAccordion")}}}this.options.onOpen.apply(this)}}},resetForm:function(){if(this.status==3){var c=this;setTimeout(function(){c.status=0},5000);this.status=4;this.displayMsg("","");this.ButtonSend.show();if(this.validator){this.validator.resetForm()}if(this.Form.get(0)){this.Form.get(0).reset()}this.Form.find("textarea.pweb-charslimit").each(function(){a("#"+a(this).attr("id")+"-charsleft").text(parseInt(a(this).attr("maxlength")))})}},submitForm:function(){var c=this;if(this.status==1||this.status==2||this.status==3||this.status==5){return false}if(this.validator&&!this.validator.form()){return false}if(this.status==4){var d=pwebcontact_l10n.form.SEND_ERR;if(this.options.msgPosition=="popup"){this.displayAlert(d,"error")}else{this.scrollToMsg();this.displayMsg(d,"error")}return false}this.status=1;this.scrollToMsg();if(this.options.reloadToken){this.ajaxCall("getToken",false)}if(this.status==1){this.ajaxCall("sendEmail")}},ajaxCall:function(f,c){var d=this,e={mid:this.options.id,format:"json",ignoreMessages:true};if(f=="sendEmail"||f=="checkCaptcha"){e=decodeURIComponent(a.param(e))+"&"+this.Form.serialize()}if(typeof c==="undefined"){c=true}a.ajax({url:this.options.ajaxUrl+f,type:"POST",cache:false,async:c,data:e,dataType:"json",dataFilter:this.ajaxResponseDataFilter,beforeSend:function(){if(f=="sendEmail"||!c){d.displayMsg(pwebcontact_l10n.form.SENDING,"progress")}}}).done(function(g,j,h){if(typeof g.data!=="undefined"&&typeof g.data.status!=="undefined"){var i=g.data;if(!c){d.displayMsg("","")}if(f=="getToken"){d.options.reloadToken=false;d.Token.attr("name",i.token)}else{if(i.debug){d.debug(i.debug,i.status)}if(i.status>=1&&i.status<=199){if(f=="sendEmail"){d.status=3;d.options.onComplete.apply(d,[i]);if(d.options.reset==1){d.resetForm()}else{if(d.options.reset==2){d.ButtonSend.hide()}else{if(d.options.reset==3){d.ButtonSend.hide();d.ButtonReset.show()}else{d.status=4;setTimeout(function(){d.status=0},5000)}}}if(d.options.msgPosition=="popup"){d.displayAlert(i.msg,"success");i.msg=""}d.displayMsg(i.msg,"success");if(d.options.closeAuto){d.autoCloseOnSuccess()}if(d.options.redirectURL){d.redirectOnSuccess()}}}else{if(typeof i.invalid!=="undefined"){d.Form.find(".invalid").removeClass("invalid");a.each(i.invalid,function(k,m){var l=a(d.options.selector+"_"+m);if(l.is("input,textarea,select")){l.addClass("invalid")}a(d.options.selector+"_"+m+"-lbl").addClass("invalid")})}d.options.onError.apply(d,[i]);d.status=0;if(i.status>=300&&!d.options.debug){d.status=5;d.ButtonSend.hide()}if(d.options.msgPosition=="popup"){d.displayAlert(i.msg,"error");i.msg=""}d.displayMsg(i.msg,"error")}}}else{d.displayError(j,h.responseText.indexOf("<html")===-1?h.responseText:"")}}).fail(function(g,i,h){d.displayError(g.status+" "+h,g.responseText.indexOf("<html")===-1?g.responseText:"")})},ajaxResponseDataFilter:function(f,e){if(e==="iframe json"&&f&&typeof f==="object"){f=a(f[0].body).text()}if(e.indexOf("json")!==-1&&typeof f==="string"&&(f.indexOf("{")!==0||f[f.length-1]!=="}")){var d=f.match(/{"success":.+{"status":[0-9]+(,"[a-z]+":.+)+}}/i);if(d){if(typeof JSON.stringify==="function"){var c=a.parseJSON(d[0]);if(typeof c.data.debug==="undefined"||!c.data.debug){c.data.debug=[]}c.data.debug.push(f.replace(d[0]," "));f=JSON.stringify(c)}else{f=d[0]}}}return f},scrollToMsg:function(){if(this.options.msgScroll&&(this.options.msgPosition=="before"||this.options.msgPosition=="after")){if(this.options.layout=="modal"){var g=this.options.msgPosition=="after"?this.Box.outerHeight()-a(window).height():0;if(g>=0){this.Modal.animate({scrollTop:g},500)}}else{if(this.element.css("position")!="fixed"){var f=this.Msg.offset().top,e=this.Msg.height(),c=a(window).scrollTop(),d=a(window).height();if(f<c||f+e>c+d){if(this.options.msgPosition=="before"){var g=f-100}else{var g=f+e+100-d}a("html,body").animate({scrollTop:parseInt(g)},500)}}}}},initAutoPopupCookie:function(){if(typeof a.cookie==="function"){var c=parseInt(a.cookie("pwebcontact"+this.options.id+"_openauto"));c=isNaN(c)?1:c+1;if(c<=this.options.maxAutoOpen){a.cookie("pwebcontact"+this.options.id+"_openauto",c,{domain:this.options.cookieDomain,path:this.options.cookiePath,expires:this.options.cookieLifetime});return true}}else{if(this.options.debug){this.debug("jQuery Cookie Plugin is not loaded")}}return false},autoPopupOnPageLoad:function(){if(this.options.openDelay){this.timer=this.delay(this.toggleForm,this.options.openDelay,this,[1])}else{this.toggleForm(1)}},autoPopupOnPageScroll:function(){var c=this;this.autoOpen=true;a(window).scroll(function(){if(c.autoOpen){c.autoOpen=false;if(c.options.openDelay){c.timer=c.delay(c.toggleForm,c.options.openDelay,c,[1])}else{c.toggleForm(1)}}})},autoPopupOnPageExit:function(){var c=this;this.autoOpen=-1;a(window).mousemove(function(d){if(c.autoOpen==-1&&d.clientY>70){c.autoOpen=1}else{if(c.autoOpen==1&&d.clientY<30){c.autoOpen=0;if(c.options.openDelay){c.timer=c.delay(c.toggleForm,c.options.openDelay,c,[1])}else{c.toggleForm(1)}}}})},autoCloseOnSuccess:function(){if(this.options.closeDelay){this.timer=this.delay(this.toggleForm,this.options.closeDelay,this,[0])}else{this.toggleForm(0)}},redirectOnSuccess:function(){var c=this;setTimeout(function(){document.location=c.options.redirectURL},this.options.redirectDelay*1000)},delay:function(e,d,f,c){return setTimeout(function(){return e.apply(f,c||arguments)},d)},displayError:function(e,c){if(!this.options.debug){this.status=5;this.ButtonSend.hide()}else{this.status=0}var d=pwebcontact_l10n.form.REQUEST_ERR+e;if(this.options.msgPosition=="popup"){this.displayAlert(d,"error")}else{this.displayMsg(d,"error")}if(c){this.debug(c)}},displayMsg:function(c,d){this.Msg.html(c?c:"&nbsp;").attr("class",d?"pweb-"+d:"")},displayAlert:function(c,d,f,g){if(typeof a.fn.alert==="function"){var e=a('<div class="pweb-alert alert alert-block '+(d?"alert-"+d:"")+' fade in"><button data-dismiss="alert" class="close" type="button">&times;</button>'+(typeof f!=="undefined"?'<h4 class="alert-heading">'+f+"</h4>":"")+"<p>"+c+"</p></div>").alert().appendTo(document.body);if((typeof g==="undefined"||g)&&this.options.msgCloseDelay){setTimeout(function(){e.alert("close")},this.options.msgCloseDelay*1000)}}else{alert(c.replace("<br>","\r\n"))}},debug:function(c,d){if(a.isArray(c)){c=c.join("<br>")}if(typeof d!=="undefined"){c=c+"<br>Response code: "+d}this.displayAlert(c,"info","Perfect Easy & Powerful Contact Form Debug",false)}}})();pwebContact.options=pwebContact.prototype.options})(window.jQuery);